/**
 * ToolIcon Component
 *
 * Displays brand-colored icons for tool types (GitHub, Jira, etc.).
 * Uses SVG icons for major tools, falls back to styled letters.
 */

import React from 'react';
import { cn } from '../../lib/utils';
import { ToolType, TOOL_ICONS } from '../../types/career-stories';

interface ToolIconProps {
  tool: ToolType;
  className?: string;
}

// Simple SVG icons for major tools (inline to avoid external dependencies)
// SVGs use w-[65%] h-[65%] so they leave padding inside the rounded container
const ToolSVGs: Partial<Record<ToolType, React.ReactNode>> = {
  github: (
    <svg viewBox="0 0 24 24" fill="currentColor" className="w-[65%] h-[65%]">
      <path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/>
    </svg>
  ),
  jira: (
    <svg viewBox="0 0 24 24" fill="currentColor" className="w-[65%] h-[65%]">
      <path d="M11.571 11.513H0a5.218 5.218 0 005.232 5.215h2.13v2.057A5.215 5.215 0 0012.575 24V12.518a1.005 1.005 0 00-1.005-1.005zm5.723-5.756H5.736a5.215 5.215 0 005.215 5.214h2.129v2.058a5.218 5.218 0 005.215 5.214V6.758a1.001 1.001 0 00-1.001-1.001zM23.013 0H11.455a5.215 5.215 0 005.215 5.215h2.129v2.057A5.215 5.215 0 0024 12.483V1.005A1.001 1.001 0 0023.013 0z"/>
    </svg>
  ),
  slack: (
    <svg viewBox="0 0 24 24" fill="currentColor" className="w-[65%] h-[65%]">
      <path d="M5.042 15.165a2.528 2.528 0 01-2.52 2.523A2.528 2.528 0 010 15.165a2.527 2.527 0 012.522-2.52h2.52v2.52zM6.313 15.165a2.527 2.527 0 012.521-2.52 2.527 2.527 0 012.521 2.52v6.313A2.528 2.528 0 018.834 24a2.528 2.528 0 01-2.521-2.522v-6.313zM8.834 5.042a2.528 2.528 0 01-2.521-2.52A2.528 2.528 0 018.834 0a2.528 2.528 0 012.521 2.522v2.52H8.834zM8.834 6.313a2.528 2.528 0 012.521 2.521 2.528 2.528 0 01-2.521 2.521H2.522A2.528 2.528 0 010 8.834a2.528 2.528 0 012.522-2.521h6.312zM18.956 8.834a2.528 2.528 0 012.522-2.521A2.528 2.528 0 0124 8.834a2.528 2.528 0 01-2.522 2.521h-2.522V8.834zM17.688 8.834a2.528 2.528 0 01-2.523 2.521 2.527 2.527 0 01-2.52-2.521V2.522A2.527 2.527 0 0115.165 0a2.528 2.528 0 012.523 2.522v6.312zM15.165 18.956a2.528 2.528 0 012.523 2.522A2.528 2.528 0 0115.165 24a2.527 2.527 0 01-2.52-2.522v-2.522h2.52zM15.165 17.688a2.527 2.527 0 01-2.52-2.523 2.526 2.526 0 012.52-2.52h6.313A2.527 2.527 0 0124 15.165a2.528 2.528 0 01-2.522 2.523h-6.313z"/>
    </svg>
  ),
  confluence: (
    <svg viewBox="0 0 24 24" fill="currentColor" className="w-[65%] h-[65%]">
      <path d="M.87 18.257c-.248.382-.53.875-.763 1.245a.764.764 0 00.255 1.04l4.965 3.054a.764.764 0 001.058-.26c.199-.332.454-.763.733-1.221 1.967-3.247 3.945-2.853 7.508-1.146l4.957 2.377a.764.764 0 001.028-.382l2.36-5.201a.764.764 0 00-.382-1.028c-1.689-.813-4.168-1.985-5.896-2.803-6.292-2.973-11.39-2.904-15.823 4.325zM23.131 5.743c.249-.382.53-.875.764-1.246a.764.764 0 00-.256-1.039L18.674.404a.764.764 0 00-1.058.26c-.199.332-.454.764-.733 1.222-1.967 3.247-3.945 2.853-7.508 1.146L4.418.655a.764.764 0 00-1.028.382L1.03 6.238a.764.764 0 00.382 1.028c1.689.812 4.169 1.985 5.896 2.803 6.292 2.973 11.39 2.903 15.823-4.326z"/>
    </svg>
  ),
  figma: (
    <svg viewBox="0 0 24 24" fill="currentColor" className="w-[65%] h-[65%]">
      <path d="M15.852 8.981h-4.588V0h4.588c2.476 0 4.49 2.014 4.49 4.49s-2.014 4.491-4.49 4.491zM12.735 7.51h3.117c1.665 0 3.019-1.355 3.019-3.019s-1.354-3.019-3.019-3.019h-3.117V7.51zM8.148 24c-2.476 0-4.49-2.014-4.49-4.49s2.014-4.49 4.49-4.49h4.588v4.49c0 2.476-2.012 4.49-4.588 4.49zm-.001-7.509c-1.665 0-3.019 1.355-3.019 3.019s1.354 3.019 3.019 3.019c1.666 0 3.018-1.354 3.018-3.019v-3.019H8.147zM8.148 8.981c-2.476 0-4.49-2.015-4.49-4.491S5.672 0 8.148 0h4.588v8.981H8.148zm-.001-7.51c-1.665 0-3.019 1.354-3.019 3.019s1.354 3.019 3.019 3.019h3.117V1.471H8.147zM8.148 15.02c-2.476 0-4.49-2.014-4.49-4.49s2.014-4.49 4.49-4.49h4.588v4.49c0 2.476-2.012 4.49-4.588 4.49zm3.117-7.509H8.147c-1.665 0-3.019 1.354-3.019 3.019s1.354 3.019 3.019 3.019c1.666 0 3.018-1.354 3.018-3.019V7.511zM15.852 15.02c-2.476 0-4.49-2.014-4.49-4.49V6.04h4.49c2.476 0 4.49 2.014 4.49 4.49s-2.014 4.49-4.49 4.49zM12.735 7.51v3.019c0 1.665 1.354 3.019 3.019 3.019s3.019-1.354 3.019-3.019-1.354-3.019-3.019-3.019h-3.019z"/>
    </svg>
  ),
  outlook: (
    <svg viewBox="0 0 24 24" fill="currentColor" className="w-[65%] h-[65%]">
      <path d="M7.88 12.04q0 .45-.11.87-.1.41-.33.74-.22.33-.58.52-.37.2-.87.2t-.85-.2q-.35-.21-.57-.55-.22-.33-.33-.75-.1-.42-.1-.86t.1-.87q.1-.43.34-.76.22-.34.59-.54.36-.2.87-.2t.86.2q.35.21.57.55.22.34.31.77.1.42.1.88zM24 12v9.38q0 .46-.33.8-.33.32-.8.32H7.13q-.46 0-.8-.33-.32-.33-.32-.8V18H1q-.41 0-.7-.3-.3-.29-.3-.7V7q0-.41.3-.7Q.58 6 1 6h6.01V2.55q0-.44.33-.76.33-.33.8-.33h14.53q.45 0 .8.34.34.34.34.81V12zm-6.01 0V7.13H7.01V6h8.76L7.01 2.98v9.04l8.76 5.32V12zM1 7.38v7.25L6 11.63 1 7.38zM18 12.42L13.57 15 18 18v-5.58zm-2.57 3.36L7 11.04v7.04l1.14-.01 6.29-.01v.01l1-.01z"/>
    </svg>
  ),
};

// Google sub-tool SVG (shared "G" icon)
const googleSvg = (
  <svg viewBox="0 0 24 24" fill="currentColor" className="w-[65%] h-[65%]">
    <path d="M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"/>
  </svg>
);

// Map Google sub-tools to shared SVG
ToolSVGs['google'] = googleSvg;
ToolSVGs['google-calendar'] = googleSvg;
ToolSVGs['google-docs'] = googleSvg;
ToolSVGs['google-drive'] = googleSvg;
ToolSVGs['google-meet'] = googleSvg;
ToolSVGs['google-sheets'] = googleSvg;

/**
 * Renders tool icon - SVG for major tools, styled letter fallback for others.
 * Color-coded based on the tool type.
 */
export const ToolIcon: React.FC<ToolIconProps> = ({ tool, className }) => {
  const config = TOOL_ICONS[tool];

  // Fallback for unknown tool types
  if (!config) {
    return (
      <span
        className={cn(
          'inline-flex items-center justify-center w-5 h-5 rounded-full text-[10px] font-bold text-white bg-gray-400 flex-shrink-0',
          className
        )}
        title="Unknown"
        aria-label="Unknown tool"
      >
        ?
      </span>
    );
  }

  const { name, color } = config;
  const svgIcon = ToolSVGs[tool];

  return (
    <span
      className={cn(
        'inline-flex items-center justify-center w-5 h-5 rounded-full text-white flex-shrink-0',
        className
      )}
      style={{ backgroundColor: color }}
      title={name}
      aria-label={name}
    >
      {svgIcon || <span className="text-[10px] font-bold">{name.charAt(0)}</span>}
    </span>
  );
};

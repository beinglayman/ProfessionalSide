<!DOCTYPE html>
<html>
<head>
    <title>Journal Payload Validation Test</title>
</head>
<body>
    <h1>Journal Payload Validation Test</h1>
    <button onclick="testJournalValidation()">Test Journal Validation</button>
    <div id="results"></div>

    <script>
        async function testJournalValidation() {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = '<p>Testing journal payload validation...</p>';
            
            // This is a sample payload that matches what the frontend would send
            const testPayload = {
                title: "Test AI Generated Entry",
                description: "This is a test workspace journal entry generated by our AI system. It demonstrates the professional nature of our work and the integration capabilities we have built. The system successfully processes work data and creates comprehensive entries that capture both technical achievements and professional growth aspects of the work performed.",
                fullContent: "This is a test workspace journal entry generated by our AI system. It demonstrates the professional nature of our work and the integration capabilities we have built. The system successfully processes work data and creates comprehensive entries that capture both technical achievements and professional growth aspects of the work performed.",
                workspaceId: "cm2a7e6jd000008l3g3j45mj3",
                visibility: "workspace",
                category: "Development",
                tags: ["Frontend Development", "test"],
                skills: ["JavaScript", "React"],
                collaborators: [],
                reviewers: [],
                artifacts: [],
                outcomes: [{
                    category: "performance",
                    title: "Results & Outcomes",
                    description: "Test results and outcomes.",
                    highlight: undefined,
                    metrics: undefined
                }]
            };

            try {
                const response = await fetch('https://hearty-prosperity-production-6047.up.railway.app/api/debug/validate-journal-payload', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(testPayload)
                });

                const result = await response.json();
                
                resultsDiv.innerHTML = `
                    <h2>Validation Test Results</h2>
                    <p><strong>Status:</strong> ${result.success ? 'SUCCESS' : 'FAILED'}</p>
                    <pre style="background: #f5f5f5; padding: 10px; overflow-x: auto;">${JSON.stringify(result, null, 2)}</pre>
                `;
            } catch (error) {
                resultsDiv.innerHTML = `
                    <h2>Test Failed</h2>
                    <p style="color: red;">Error: ${error.message}</p>
                `;
            }
        }
    </script>
</body>
</html>